# Verdex System Architecture - Visual Overview

## High-Level Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              CLIENT LAYER                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │
│  │   Flutter App   │  │  Vue.js Admin   │  │      Web Browser           │  │
│  │   (Mobile)      │  │   Dashboard     │  │                            │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           API GATEWAY LAYER                                │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────┐  │
│  │                    Laravel API Gateway                                 │  │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────┐  │  │
│  │  │ Authentication  │  │ Rate Limiting   │  │    Request/Response     │  │  │
│  │  │   Middleware    │  │                 │  │       Handling          │  │  │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           SERVICE LAYER                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐          │
│  │    User     │ │    Plant    │ │  Feedback   │ │Notification │          │
│  │ Management  │ │ Management  │ │   System    │ │   System    │          │
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘          │
│                                                                             │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐          │
│  │    File     │ │  Activity   │ │   Cache     │ │   Search    │          │
│  │  Storage    │ │  Logging    │ │  Service    │ │   Engine    │          │
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘          │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            DATA LAYER                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │
│  │   MySQL/PostgreSQL │     Redis      │  │      File Storage           │  │
│  │   Database       │     Cache       │  │     (Images, Files)         │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                        EXTERNAL SERVICES                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │
│  │   AI Plant      │  │   Email         │  │   Push Notifications       │  │
│  │ Identification  │  │   Service       │  │   (Firebase FCM)           │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Database Schema Overview

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              DATABASE SCHEMA                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                    │
│  │    users    │    │   plants    │    │ categories  │                    │
│  │             │    │             │    │             │                    │
│  │ • id        │    │ • id        │    │ • id        │                    │
│  │ • username  │    │ • name      │    │ • name      │                    │
│  │ • email     │    │ • scientific│    │ • description│                   │
│  │ • password  │    │   name      │    └─────────────┘                    │
│  │ • avatar    │    │ • category_id│                                      │
│  └─────────────┘    └─────────────┘                                      │
│         │                   │                                              │
│         │                   │                                              │
│         ▼                   ▼                                              │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                    │
│  │  feedback   │    │plant_trans- │    │  favorites  │                    │
│  │             │    │  lations    │    │             │                    │
│  │ • id        │    │ • id        │    │ • id        │                    │
│  │ • user_id   │    │ • plant_id  │    │ • user_id   │                    │
│  │ • category  │    │ • language  │    │ • plant_id  │                    │
│  │ • rating    │    │ • name      │    │ • created_at│                    │
│  │ • message   │    │ • description│   └─────────────┘                    │
│  │ • comment   │    └─────────────┘                                      │
│  └─────────────┘                                                          │
│         │                                                                   │
│         ▼                                                                   │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                    │
│  │notifications│    │activity_logs│    │   roles     │                    │
│  │             │    │             │    │             │                    │
│  │ • id        │    │ • id        │    │ • id        │                    │
│  │ • type      │    │ • user_id   │    │ • name      │                    │
│  │ • data      │    │ • event     │    │ • guard_name│                    │
│  │ • read_at   │    │ • properties│    └─────────────┘                    │
│  └─────────────┘    └─────────────┘                                      │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Data Flow Examples

### 1. Plant Identification Flow
```
User → Flutter App → Laravel API → AI Service → Database → Response → User
  │        │            │            │           │           │
  │        │            │            │           │           └── Display Results
  │        │            │            │           └── Store Activity Log
  │        │            │            └── Process Image
  │        │            └── Validate Request
  │        └── Take Photo
  └── Want to identify plant
```

### 2. Feedback System Flow
```
User → Submit Feedback → API → Database → Admin Dashboard
  │         │            │        │            │
  │         │            │        │            └── Admin sees new feedback
  │         │            │        │            └── Store feedback
  │         │            │            └── Validate & process
  │         │            └── Fill feedback form
  │         └── Want to give feedback

Admin → Respond to Feedback → API → Database → Email → User
  │           │              │        │         │        │
  │           │              │        │         │        └── Receive notification
  │           │              │        │         └── Send email notification
  │           │              │        └── Update feedback
  │           │              └── Process response
  │           └── Write response
  │           └── See feedback in dashboard
```

### 3. Real-time Sync Flow
```
App → Request Data → API → Check Cache
  │       │          │         │
  │       │          │         ├── Cache Hit → Return Cached Data
  │       │          │         └── Cache Miss → Query Database → Store in Cache
  │       │          └── Return Data
  │       └── Display Data
  │       └── User sees updated information
```

## Security Layers

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              SECURITY LAYERS                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐  │
│  │                    API Security                                         │  │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐      │  │
│  │  │   Rate      │ │   CORS      │ │   CSRF      │ │   Input     │      │  │
│  │  │ Limiting    │ │ Protection  │ │ Protection  │ │ Validation  │      │  │
│  │  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘      │  │
│  └─────────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐  │
│  │                  Authentication & Authorization                         │  │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐      │  │
│  │  │   Laravel   │ │   Role-     │ │ Permission- │ │   Token     │      │  │
│  │  │  Sanctum    │ │   Based     │ │   Based     │ │ Expiration  │      │  │
│  │  │             │ │   Access    │ │   Access    │ │             │      │  │
│  │  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘      │  │
│  └─────────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐  │
│  │                      Data Protection                                    │  │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐      │  │
│  │  │ Encryption  │ │ SQL Injection│ │ XSS         │ │ Output      │      │  │
│  │  │             │ │ Protection   │ │ Protection  │ │ Escaping    │      │  │
│  │  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘      │  │
│  └─────────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Technology Stack Summary

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           TECHNOLOGY STACK                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  BACKEND (Laravel)                    FRONTEND (Mobile)                    │
│  ┌─────────────────┐                 ┌─────────────────┐                   │
│  │ • PHP 8.x       │                 │ • Flutter       │                   │
│  │ • Laravel 10.x  │                 │ • Dart          │                   │
│  │ • MySQL/PostgreSQL│               │ • Provider      │                   │
│  │ • Redis         │                 │ • http package  │                   │
│  │ • Sanctum Auth  │                 │ • SharedPreferences│               │
│  └─────────────────┘                 └─────────────────┘                   │
│                                                                             │
│  FRONTEND (Admin)                     INFRASTRUCTURE                       │
│  ┌─────────────────┐                 ┌─────────────────┐                   │
│  │ • Vue.js 3      │                 │ • Nginx/Apache  │                   │
│  │ • Bootstrap     │                 │ • PHP-FPM       │                   │
│  │ • Axios         │                 │ • Redis         │                   │
│  │ • Vuex          │                 │ • CDN           │                   │
│  └─────────────────┘                 └─────────────────┘                   │
│                                                                             │
│  EXTERNAL SERVICES                                                         │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────────────────┐   │
│  │ AI Plant        │ │ Email Service   │ │ Push Notifications          │   │
│  │ Identification  │ │ (Laravel Mail)  │ │ (Firebase FCM)              │   │
│  └─────────────────┘ └─────────────────┘ └─────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
```

This architecture provides a robust, scalable foundation for the Verdex plant identification application with clear separation of concerns and modern development practices. 